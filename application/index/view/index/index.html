<div id="content-container" class="container">
    <div class="row">
        <div class="col-md-3">
            {include file="common/sidenav_index" /}
        </div>
        <div class="col-md-9">
            <div class="panel panel-default">
                <div class="panel-body">
                    <h2 class="page-header">{:__('Profile')}</h2>
                    <div class="tz-gallery">

                        <div class="row">
                            <ul class="flow-default" id="LAY_demo1"></ul>
                            <!--<li class="col-sm-6 col-md-4">
                                <div class="thumbnail">
                                    <a class="lightbox" href="/uploads/images/park.jpg">
                                        <img src="/uploads/images/park.jpg" alt="Park">
                                    </a>
                                    <div class="caption caption_1">
                                        <h3>
                                            <span>yangmengyu</span>
                                            <i class="iconfont">&#xe601;</i>
                                            <i class="layui-icon layui-icon-radio"></i>
                                        </h3>
                                        <p>
                                            27,安道尔
                                        </p>
                                    </div>
                                    <div class="caption caption_2">
                                        <span class="fa-stack fa-2x icon-heart" >
                                              <i class="fa fa-circle fa-stack-2x"></i>
                                              <i class="fa fa-heart-o fa-stack-1x"></i>
                                        </span>
                                        <span class="fa-stack fa-2x icon-email">
                                              <i class="fa fa-circle fa-stack-2x"></i>
                                              <i class="fa fa-envelope-o fa-stack-1x"></i>
                                        </span>

                                    </div>
                                </div>
                            </li>-->
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    layui.use('flow', function(){
        var flow = layui.flow
            ,param =  location.search;

        flow.load({
            elem: '#LAY_demo1' //流加载容器
            ,done: function(page, next){ //执行下一页的回调
                var url = '{:url("index/index")}';
                $.post(url+param, {page:page}, function(res){
                    if(res.code == 1){
                        var lis = [];
                        for(var i = 0; i < res.data.data.length; i++){
                            var str = '<li class="col-sm-6 col-md-4"> <div class="thumbnail"> <a class="lightbox" href="/uploads/images/park.jpg"> <img src="'+res.data.data[i].avatar+'" alt="Park"> </a> <div class="caption caption_1"> <h3>';
                            if(res.data.data[i].gender == '0'){
                                str += '<span><i class="fa fa-venus text-danger fa-fw"></i>'+res.data.data[i].nickname+'</span>';
                            }else if(res.data.data[i].gender == '1'){
                                str += '<i class="fa fa-mars text-info fa-fw"></i><span>'+res.data.data[i].nickname+'</span>';
                            }else{
                                str += '<i class="fa fa-genderless text-success fa-fw"></i><span>'+res.data.data[i].nickname+'</span>';
                            }

                            //是否为 VIP
                            if(res.data.data[i].isvip == 1){
                                str += '<i class="iconfont">&#xe601;</i>';
                            }
                            //是否在线
                            if(res.data.data[i].online == 'online') {
                                str += '<i class="layui-icon layui-icon-radio"></i>';
                            }
                            str += '</h3> <p>'+res.data.data[i].age+','+res.data.data[i].country+' </p> </div> <div class="caption caption_2"> <span class="fa-stack fa-2x icon-heart" > <i class="fa fa-circle fa-stack-2x"></i>';
                            //是否喜欢
                            str += '<i class="fa fa-heart-o fa-stack-1x"></i>';
                            str += '</span><span class="fa-stack fa-2x icon-email"><i class="fa fa-circle fa-stack-2x"></i>';
                            str += '<i class="fa fa-envelope-o fa-stack-1x"></i>';
                            str += '</span></div> </div> </li>';
                            lis.push(str);
                        }
                        //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                        //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                        next(lis.join(''), page < res.data.total);
                    }else{
                        layer.msg(res.msg);
                    }

                });


            }
        });


        //按屏加载图片
        flow.lazyimg({
            elem: '#LAY_demo3 img'
            ,scrollElem: '#LAY_demo3' //一般不用设置，此处只是演示需要。
        });

    });
</script>